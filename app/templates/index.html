{% extends "base.html" %}

{% block content %}

<h2>Buscar Reservas</h2>
<p>Escolha o tipo de recurso, perÃ­odo e suas credenciais.</p>

<form id="formBusca" method="post">

    <!-- Tipo de busca -->
    <label for="tipo">Tipo de Recurso:</label><br>
    <select id="tipo" name="tipo" onchange="atualizarAction()">
        <option value="tenis" selected>ðŸŽ¾ TÃªnis</option>
        <option value="churras">ðŸ”¥ Churrasqueira</option>
    </select>
    <br><br>

    <!-- Datas -->
    <label>Data inicial:</label><br>
    <input type="date" name="start_date" id="start_date">
    <br><br>

    <label>Data final:</label><br>
    <input type="date" name="end_date">
    <br><br>

    <!-- Credenciais -->
    <label>UsuÃ¡rio BBZ:</label><br>
    <input type="text" name="username" required><br><br>

    <label>Senha BBZ:</label><br>
    <input type="password" name="password" required><br><br>

    <button class="btn" type="submit">Buscar</button>
</form>


<script>
    // Ajusta a aÃ§Ã£o do formulÃ¡rio conforme o dropdown
    function atualizarAction() {
        const tipo = document.getElementById("tipo").value;
        const form = document.getElementById("formBusca");

        if (tipo === "tenis") {
            form.action = "/run_tenis";
        } else {
            form.action = "/run_churras";
        }
    }

    // Executa ao carregar (para selecionar o endpoint inicial)
    atualizarAction();

    // Preenche automaticamente a data inicial com HOJE
    document.addEventListener('DOMContentLoaded', function() {
        const hoje = new Date().toISOString().split('T')[0];
        const campo = document.getElementById("start_date");
        campo.value = hoje;
    });
</script>

{% endblock %}
